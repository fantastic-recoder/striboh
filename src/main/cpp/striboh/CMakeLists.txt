message(STATUS "Striboh conan libs: ${CONAN_LIBS}.")

configure_file(striboh_backend.cpp.chai ${striboh_BINARY_DIR}/share/striboh/striboh_backend.cpp.chai COPYONLY)

add_library(striboh_idl_library STATIC stribohIdlParser.cpp stribohIdlParser.hpp stribohIdlAstRootNode.cpp stribohIdlAstRootNode.hpp stribohIdlAstBaseNode.hpp stribohIdlAstModuleNode.cpp stribohIdlAstModuleNode.hpp stribohIdlAstIdentifierNode.hpp stribohIdlAstImportListNode.hpp stribohIdlAstMethodNode.hpp stribohIdlAstTypeNode.hpp stribohIdlAstEBuildinTypes.hpp stribohIdlAstTypedIdentifierNode.hpp stribohIdlAstNode.hpp stribohIdlAstBaseNode.cpp stribohIdlAstImportListNode.cpp stribohIdlAstMethodNode.cpp stribohIdlAstModuleListNode.cpp stribohIdlAstTypedIdentifierNode.cpp stribohIdlAstImportNode.hpp stribohIdlAstImportNode.cpp stribohIdlAstTypeNode.cpp stribohIdlAstIdentifierNode.cpp stribohIdlAstInterfaceListNode.cpp stribohIdlAstInterfaceListNode.hpp stribohIdlAstModuleBodyNode.cpp stribohIdlAstModuleBodyNode.hpp stribohIdlAstInterfaceNode.cpp stribohIdlAstInterfaceNode.hpp stribohIdlAstVisitor.hpp stribohIdlAstVisitorBackend.cpp stribohIdlAstVisitorBackend.hpp stribohBaseExceptionsFileNotFound.hpp stribohBaseExceptionsFileNotFound.cpp )

add_library(striboh_base_library STATIC stribohBaseBroker.cpp stribohBaseTransportByWebSockets.cpp stribohBaseTransportByWebSockets.hpp stribohBaseBroker.cpp stribohBaseBroker.hpp stribohBaseTransportIFace.cpp stribohBaseTransportIFace.hpp stribohBaseTransportInProcess.cpp stribohBaseTransportInProcess.hpp stribohBaseInterface.cpp stribohBaseInterface.hpp stribohBaseMethod.cpp stribohBaseMethod.hpp stribohBaseMessage.cpp stribohBaseMessage.hpp stribohBaseSignature.cpp stribohBaseSignature.hpp stribohBaseBuffer.cpp stribohBaseBuffer.hpp stribohBaseBeastServer.cpp stribohBaseBeastServer.hpp stribohBaseLogIface.hpp stribohBaseLogBoostImpl.cpp stribohBaseLogBoostImpl.hpp stribohBaseBrokerIface.hpp stribohBaseBrokerIface.cpp stribohBaseServerIface.cpp stribohBaseServerIface.hpp stribohBaseUtils.cpp stribohBaseUtils.hpp stribohBaseClient.cpp stribohBaseClient.hpp stribohBaseEServerState.hpp stribohBaseMethodName.hpp stribohBaseInstanceId.hpp stribohBaseParameterList.cpp stribohBaseParameterList.hpp stribohBaseEMessageParsingError.hpp stribohBaseExceptionsInMessageParserError.cpp stribohBaseExceptionsInMessageParserError.hpp stribohBaseObject.cpp stribohBaseObject.hpp)
target_include_directories(striboh_base_library PUBLIC ../NamedType/include)
target_include_directories(striboh_base_library PUBLIC ../di/include)
target_include_directories(striboh_base_library PUBLIC ../fmt/include)
target_include_directories(striboh_base_library PUBLIC ..)

add_executable(striboh_idl_compiler stribohIdlCompiler_main.cpp stribohIdlAstErrorNode.hpp)
target_link_libraries(striboh_idl_compiler striboh_base_library striboh_idl_library boost_program_options boost_log boost_filesystem boost_system boost_thread pthread fmt ${CMAKE_DL_LIBS})

